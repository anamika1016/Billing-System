  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='BillingSystem'*/[0m
Started GET "/" for ::1 at 2026-01-05 09:56:17 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='BillingSystem'*/[0m
Processing by BillsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering bills/new.html.erb within layouts/application
  Rendered bills/new.html.erb within layouts/application (Duration: 16.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 34.9ms | GC: 0.0ms)
Completed 200 OK in 148ms (Views: 43.7ms | ActiveRecord: 2.3ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/bills" for ::1 at 2026-01-05 09:57:07 +0530
Processing by BillsController#create as HTML
  Parameters: {"authenticity_token" => "[FILTERED]", "customer_email" => "[FILTERED]", "items" => {"0" => {"product_id" => "2", "quantity" => "7"}, "1767587210026" => {"product_id" => "5", "quantity" => "8"}}, "denominations" => {"0" => {"value" => "500", "count" => "8"}, "1" => {"value" => "50", "count" => "6"}, "2" => {"value" => "20", "count" => "5"}, "3" => {"value" => "10", "count" => "4"}, "4" => {"value" => "5", "count" => "3"}, "5" => {"value" => "2", "count" => "2"}, "6" => {"value" => "1", "count" => "1"}}, "paid_amount" => "666", "commit" => "Generate Bill"}
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='BillingSystem',controller='bills'*/[0m
  â†³ app/controllers/bills_controller.rb:24:in 'block (2 levels) in BillsController#create'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."product_id" = '2' LIMIT 1 /*action='create',application='BillingSystem',controller='bills'*/[0m
  â†³ app/controllers/bills_controller.rb:24:in 'block (2 levels) in BillsController#create'
  [1m[36mProduct Update (0.3ms)[0m  [1m[33mUPDATE "products" SET "stock" = 87, "updated_at" = '2026-01-05 04:27:07.778899' WHERE "products"."id" = 7 /*action='create',application='BillingSystem',controller='bills'*/[0m
  â†³ app/controllers/bills_controller.rb:48:in 'block (2 levels) in BillsController#create'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."product_id" = '5' LIMIT 1 /*action='create',application='BillingSystem',controller='bills'*/[0m
  â†³ app/controllers/bills_controller.rb:24:in 'block (2 levels) in BillsController#create'
  [1m[36mPurchase Create (0.2ms)[0m  [1m[32mINSERT INTO "purchases" ("customer_email", "total_without_tax", "total_tax", "net_price", "paid_amount", "rounded_net_price", "balance_payable", "created_at", "updated_at", "denominations_collected") VALUES ('kajal@gmail.com', 1400.0, 168.0, 1568.0, 666.0, 1568, -902.0, '2026-01-05 04:27:07.823307', '2026-01-05 04:27:07.823307', '{"500":8,"50":6,"20":5,"10":4,"5":3,"2":2,"1":1}') RETURNING "id" /*action='create',application='BillingSystem',controller='bills'*/[0m
  â†³ app/controllers/bills_controller.rb:69:in 'block in BillsController#create'
  [1m[36mPurchaseItem Create (0.2ms)[0m  [1m[32mINSERT INTO "purchase_items" ("purchase_id", "product_id", "quantity", "unit_price", "tax_percentage", "purchase_price", "tax_payable", "total_price", "created_at", "updated_at") VALUES (4, 7, 7, 200.0, 12.0, 1400.0, 168.0, 1568.0, '2026-01-05 04:27:07.839581', '2026-01-05 04:27:07.839581') RETURNING "id" /*action='create',application='BillingSystem',controller='bills'*/[0m
  â†³ app/controllers/bills_controller.rb:69:in 'block in BillsController#create'
[ActiveJob] Enqueued ActionMailer::MailDeliveryJob (Job ID: bddd70eb-8320-4856-bf8a-ac93372f8fe8) to Async(default) with arguments: "InvoiceMailer", "send_invoice", "deliver_now", {args: [#<GlobalID:0x00007bd6eb278010 @uri=#<URI::GID gid://billing-system/Purchase/4>>]}
[ActiveJob] â†³ app/controllers/bills_controller.rb:71:in 'block in BillsController#create'
Redirected to http://localhost:3000/bills/4
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='BillingSystem',controller='bills'*/[0m
  â†³ app/controllers/bills_controller.rb:17:in 'BillsController#create'
Completed 302 Found in 325ms (ActiveRecord: 23.0ms (5 queries, 0 cached) | GC: 28.3ms)


[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   [1m[36mPurchase Load (2.0ms)[0m  [1m[34mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = 4 LIMIT 1 /*application='BillingSystem'*/[0m
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8] Performing ActionMailer::MailDeliveryJob (Job ID: bddd70eb-8320-4856-bf8a-ac93372f8fe8) from Async(default) enqueued at 2026-01-05T04:27:07.949238175Z with arguments: "InvoiceMailer", "send_invoice", "deliver_now", {args: [#<GlobalID:0x00007bd6eb17e128 @uri=#<URI::GID gid://billing-system/Purchase/4>>]}
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   Rendering layout layouts/mailer.html.erb
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   Rendering invoice_mailer/send_invoice.html.erb within layouts/mailer
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   [1m[36mPurchaseItem Load (0.2ms)[0m  [1m[34mSELECT "purchase_items".* FROM "purchase_items" WHERE "purchase_items"."purchase_id" = 4 /*application='BillingSystem',job='ActionMailer%3A%3AMailDeliveryJob'*/[0m
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   â†³ app/views/invoice_mailer/send_invoice.html.erb:15
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = 7 LIMIT 1 /*application='BillingSystem',job='ActionMailer%3A%3AMailDeliveryJob'*/[0m
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   â†³ app/views/invoice_mailer/send_invoice.html.erb:17
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   Rendered invoice_mailer/send_invoice.html.erb within layouts/mailer (Duration: 47.3ms | GC: 0.6ms)
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   Rendered layout layouts/mailer.html.erb (Duration: 49.6ms | GC: 0.6ms)
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   Rendering layout layouts/mailer.text.erb
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   Rendering invoice_mailer/send_invoice.text.erb within layouts/mailer
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   Rendered invoice_mailer/send_invoice.text.erb within layouts/mailer (Duration: 0.6ms | GC: 0.0ms)
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8]   Rendered layout layouts/mailer.text.erb (Duration: 1.9ms | GC: 0.0ms)
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8] InvoiceMailer#send_invoice: processed outbound mail in 93.1ms
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8] Delivered mail 695b3d9c24c53_11403028c81957b@papl-HP-Pavilion-x360-2-in-1-Laptop-14-ek1xxx.mail (97.6ms)
[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8] Date: Mon, 05 Jan 2026 09:57:08 +0530
From: from@example.com
To: kajal@gmail.com
Message-ID: <695b3d9c24c53_11403028c81957b@papl-HP-Pavilion-x360-2-in-1-Laptop-14-ek1xxx.mail>
Subject: Your Invoice - 4
MIME-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_695b3d9c1d2ff_11403028c8194e6";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_695b3d9c1d2ff_11403028c8194e6
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Invoice#send_invoice

, find me in app/views/invoice_mailer/send_invoice.text.erb


----==_mimepart_695b3d9c1d2ff_11403028c8194e6
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!-- BEGIN app/views/layouts/mailer.html.erb --><!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style>
      /* Email styles need to be inline */
    </style>
  </head>

  <body>
    <!-- BEGIN app/views/invoice_mailer/send_invoice.html.erb --><h1>Invoice for your purchase</h1>
<p>Hello,</p>
<p>Thank you for your purchase. Here are your bill details:</p>

<table border="1" style="border-collapse: collapse; width: 100%;">
  <thead>
    <tr>
      <th>Product ID</th>
      <th>Unit Price</th>
      <th>Quantity</th>
      <th>Total Price</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td>2</td>
        <td>$200.00</td>
        <td>7</td>
        <td>$1,568.00</td>
      </tr>
  </tbody>
</table>

<p><strong>Net Price:</strong> $1,568.00</p>
<p><strong>Rounded Value:</strong> $1,568.00</p>
<p><strong>Balance Payable:</strong> -$902.00</p>

<p>Best Regards,<br>Billing System Team</p>
<!-- END app/views/invoice_mailer/send_invoice.html.erb -->
  </body>
</html>
<!-- END app/views/layouts/mailer.html.erb -->
----==_mimepart_695b3d9c1d2ff_11403028c8194e6--

[ActiveJob] [ActionMailer::MailDeliveryJob] [bddd70eb-8320-4856-bf8a-ac93372f8fe8] Performed ActionMailer::MailDeliveryJob (Job ID: bddd70eb-8320-4856-bf8a-ac93372f8fe8) from Async(default) in 232.22ms
Started GET "/bills/4" for ::1 at 2026-01-05 09:57:08 +0530
Processing by BillsController#show as HTML
  Parameters: {"id" => "4"}
  [1m[36mPurchase Load (0.8ms)[0m  [1m[34mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = 4 LIMIT 1 /*action='show',application='BillingSystem',controller='bills'*/[0m
  â†³ app/controllers/bills_controller.rb:83:in 'BillsController#show'
  Rendering layout layouts/application.html.erb
  Rendering bills/show.html.erb within layouts/application
  [1m[36mPurchaseItem Load (0.2ms)[0m  [1m[34mSELECT "purchase_items".* FROM "purchase_items" WHERE "purchase_items"."purchase_id" = 4 /*action='show',application='BillingSystem',controller='bills'*/[0m
  â†³ app/views/bills/show.html.erb:27
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = 7 LIMIT 1 /*action='show',application='BillingSystem',controller='bills'*/[0m
  â†³ app/views/bills/show.html.erb:29
  Rendered bills/show.html.erb within layouts/application (Duration: 50.5ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 53.6ms | GC: 1.0ms)
Completed 200 OK in 85ms (Views: 54.1ms | ActiveRecord: 1.1ms (3 queries, 0 cached) | GC: 1.0ms)


Started GET "/" for ::1 at 2026-01-05 09:58:12 +0530
Processing by BillsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering bills/new.html.erb within layouts/application
  Rendered bills/new.html.erb within layouts/application (Duration: 11.3ms | GC: 1.3ms)
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | GC: 1.3ms)
Completed 200 OK in 35ms (Views: 16.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.3ms)


Started GET "/" for ::1 at 2026-01-05 09:59:10 +0530
Processing by BillsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering bills/new.html.erb within layouts/application
  Rendered bills/new.html.erb within layouts/application (Duration: 7.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 22.5ms | GC: 3.7ms)
Completed 200 OK in 70ms (Views: 32.5ms | ActiveRecord: 3.6ms (0 queries, 0 cached) | GC: 3.7ms)


Started GET "/purchases" for ::1 at 2026-01-05 09:59:42 +0530
Processing by PurchasesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering purchases/index.html.erb within layouts/application
  [1m[36mPurchase Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "purchases" LIMIT 1 /*action='index',application='BillingSystem',controller='purchases'*/[0m
  â†³ app/views/purchases/index.html.erb:25
  [1m[36mPurchase Load (0.3ms)[0m  [1m[34mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."created_at" DESC /*action='index',application='BillingSystem',controller='purchases'*/[0m
  â†³ app/views/purchases/index.html.erb:26
  Rendered purchases/index.html.erb within layouts/application (Duration: 40.5ms | GC: 1.9ms)
  Rendered layout layouts/application.html.erb (Duration: 56.3ms | GC: 2.7ms)
Completed 200 OK in 90ms (Views: 58.1ms | ActiveRecord: 2.3ms (2 queries, 0 cached) | GC: 2.7ms)


Started GET "/purchases" for ::1 at 2026-01-05 09:59:44 +0530
Processing by PurchasesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering purchases/index.html.erb within layouts/application
  [1m[36mPurchase Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "purchases" LIMIT 1 /*action='index',application='BillingSystem',controller='purchases'*/[0m
  â†³ app/views/purchases/index.html.erb:25
  [1m[36mPurchase Load (0.2ms)[0m  [1m[34mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."created_at" DESC /*action='index',application='BillingSystem',controller='purchases'*/[0m
  â†³ app/views/purchases/index.html.erb:26
  Rendered purchases/index.html.erb within layouts/application (Duration: 16.2ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 20.7ms | GC: 0.6ms)
Completed 200 OK in 37ms (Views: 20.8ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.6ms)


Started GET "/" for ::1 at 2026-01-05 09:59:46 +0530
Processing by BillsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering bills/new.html.erb within layouts/application
  Rendered bills/new.html.erb within layouts/application (Duration: 8.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | GC: 0.0ms)
Completed 200 OK in 37ms (Views: 16.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.7ms)


Started GET "/purchases" for ::1 at 2026-01-05 09:59:47 +0530
Processing by PurchasesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering purchases/index.html.erb within layouts/application
  [1m[36mPurchase Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "purchases" LIMIT 1 /*action='index',application='BillingSystem',controller='purchases'*/[0m
  â†³ app/views/purchases/index.html.erb:25
  [1m[36mPurchase Load (0.1ms)[0m  [1m[34mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."created_at" DESC /*action='index',application='BillingSystem',controller='purchases'*/[0m
  â†³ app/views/purchases/index.html.erb:26
  Rendered purchases/index.html.erb within layouts/application (Duration: 5.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.7ms | GC: 0.0ms)
Completed 200 OK in 25ms (Views: 13.7ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.5ms)


Started GET "/purchases/4" for ::1 at 2026-01-05 09:59:49 +0530
Processing by PurchasesController#show as HTML
  Parameters: {"id" => "4"}
  [1m[36mPurchase Load (0.1ms)[0m  [1m[34mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = 4 LIMIT 1 /*action='show',application='BillingSystem',controller='purchases'*/[0m
  â†³ app/controllers/purchases_controller.rb:7:in 'PurchasesController#show'
  Rendering layout layouts/application.html.erb
  Rendering purchases/show.html.erb within layouts/application
  Rendering bills/show.html.erb
  [1m[36mPurchaseItem Load (0.3ms)[0m  [1m[34mSELECT "purchase_items".* FROM "purchase_items" WHERE "purchase_items"."purchase_id" = 4 /*action='show',application='BillingSystem',controller='purchases'*/[0m
  â†³ app/views/bills/show.html.erb:27
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = 7 LIMIT 1 /*action='show',application='BillingSystem',controller='purchases'*/[0m
  â†³ app/views/bills/show.html.erb:29
  Rendered bills/show.html.erb (Duration: 80.5ms | GC: 2.1ms)
  Rendered purchases/show.html.erb within layouts/application (Duration: 82.5ms | GC: 2.1ms)
  Rendered layout layouts/application.html.erb (Duration: 86.1ms | GC: 2.7ms)
Completed 200 OK in 105ms (Views: 85.0ms | ActiveRecord: 1.9ms (3 queries, 0 cached) | GC: 3.0ms)


